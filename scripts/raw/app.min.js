var app=angular.module("myApp",["ngRoute","ipCookie","ui.sortable"]);app.config(["$interpolateProvider",function(e){e.startSymbol("{[{"),e.endSymbol("}]}")}]),app.directive("syncFocusWith",["$timeout","$rootScope",function(e,t){return{restrict:"A",scope:{focusValue:"=syncFocusWith"},link:function(e,t,n){e.$watch("focusValue",function(e,n){t[0].focus()})}}}]),app.directive("resizer",["$document","ipCookie",function(e,t){return function(n,i,o){function r(e){if("vertical"==o.resizer){var n=e.pageX,r=document.documentElement.clientWidth,a=n/r*100;o.resizerMax&&a>o.resizerMax&&(a=parseInt(o.resizerMax)),o.resizerMin&&a<o.resizerMin&&(a=parseInt(o.resizerMin)),t("leftWidth",a,{expires:2e3}),i.css({left:a+"%"}),angular.element(document.querySelector(o.resizerLeft)).css({width:a+"%"}),angular.element(document.querySelector(o.resizerRight)).css({width:100-a+"%"})}else{var s=window.innerHeight-e.pageY;i.css({bottom:s+"px"}),angular.element(document.querySelector(o.resizerTop)).css({bottom:s+parseInt(o.resizerHeight)+"px"}),angular.element(document.querySelector(o.resizerBottom)).css({height:s+"px"})}}function a(){e.unbind("mousemove",r),e.unbind("mouseup",a)}i.on("mousedown",function(t){t.preventDefault(),e.on("mousemove",r),e.on("mouseup",a)})}}]),app.factory("jsonDefer",["$http","$q",function(e,t){var n=function(n){var i=t.defer();return e.get(n).then(function(e){i.resolve(e)}),i.promise};return{_getDetails:n}}]),app.controller("ArabicKeyCtrl",["$scope","$http","ipCookie","jsonDefer",function(e,t,n,i){e.text="",e.options=[],e.cookieExpire=2e3,e.transliterationScheme=e.options.transliterationScheme="Kamal",e.transliterationJson=["json/Custom.json","json/Kamal.json","json/ArabTex.json","json/Indo.json"],e.transliterationInfo=[],e.transliterationTables=[],e.transliterationKeys=[],e.transliterationSchemeOptions=[],e.fontOptions=[{fontValue:"scheherazade",fontName:"Sceherazade"},{fontValue:"amiri",fontName:"Amiri"},{fontValue:"lateef",fontName:"Lateef"},{fontValue:"Arabic Typesetting",fontName:"Arabic Typesetting"},{fontValue:"Traditional Arabic",fontName:"Traditional Arabic"},{fontValue:"Simplified Arabic",fontName:"Simplified Arabic"}],e.fontSizeOptions=[];for(var o=20;500>=o;o++)e.fontSizeOptions.push(o);e.initCookie=function(t,i){"undefined"==typeof n(t)?(e.options[t]=i,n(t,e.options[t],{expires:e.cookieExpire}),"transliterationScheme"==t&&(e.transliterationScheme=i,n(t,e.transliterationScheme,{expires:e.cookieExpire}))):(e.options[t]=n(t),"transliterationScheme"==t&&(e.transliterationScheme=n(t)))},e.initCookie("font","amiri"),e.initCookie("fontSize","60"),e.initCookie("transliterateTyping",!0),e.initCookie("transliterationScheme","Custom"),e.initCookie("leftWidth","50"),e.focusInput=function(){e.isFocused=!e.isFocused},e.write=function(t){e.text+=t,e.focusInput()},e.saveState=function(){n("font",e.options.font,{expires:e.cookieExpire}),n("fontSize",e.options.fontSize,{expires:e.cookieExpire}),n("transliterateTyping",e.options.transliterateTyping,{expires:e.cookieExpire}),n("transliterationScheme",e.options.transliterationScheme,{expires:e.cookieExpire}),n("transliterationScheme",e.transliterationScheme,{expires:e.cookieExpire}),e.focusInput()},angular.forEach(e.jsons,function(n){t.get(n).success(function(t){e.abc.push(t)})}),angular.forEach(e.transliterationJson,function(t,n){var o=i._getDetails(t);o.then(function(t){t.data&&(e.transliterationSchemeOptions.push(t.data.TransliterationScheme),e.transliterationTables[t.data.TransliterationScheme]=t.data.TransliterationMap,e.transliterationInfo[t.data.TransliterationScheme]=t.data,e.transliterationKeys[t.data.TransliterationScheme]=angular.copy(e.transliterationTables[t.data.TransliterationScheme]),e.buildRecursiveTransliteration())})}),e.dragControlListeners={accept:function(e,t){return!0},itemMoved:function(e){console.log("itemMoved")},orderChanged:function(e){console.log("orderChanged")}},e.buildRecursiveTransliteration=function(){angular.forEach(e.transliterationTables[e.transliterationScheme],function(t,n){angular.forEach(t.groupSet,function(n,i){angular.forEach(n.transliteration,function(i,o){if(i.length>=2&&"[void]"!=i&&"grammar rules"!=t.groupName){var r=e.transliterate(i);n.transliteration.push(r)}})})})},e.transliterate=function(t){if(e.options.transliterateTyping){var n="undefined"==typeof t?e.text:t;if(angular.forEach(e.transliterationTables[e.transliterationScheme],function(e,t){angular.forEach(e.groupSet,function(t,i){angular.forEach(t.transliteration,function(i,o){"grammar rules"!=e.groupName&&(i=i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"));var r=new RegExp(i,"g");n=n.replace(r,t.arabicChar)})})}),"undefined"!=typeof t)return n;e.text=n}}}]);var client=new ZeroClipboard(document.getElementById("copyLink"));client.on("ready",function(e){client.on("aftercopy",function(e){e.target.text="Copied",setInterval(function(){e.target.text="Copy"},3e3)})});